---
theme: dashboard
toc: false
sql:
  txn1mm: ./data/cc_data_1mm.parquet
---
# Credit Card Transactions
This dashboard is demonstrating how easy the Observable Framework makes it to use the superfast OLAP DuckDB-WASM running in browser.
Fake credit card transaction data (just over 1MM records) was generated by [Sparkov_Data_Generation](https://github.com/namebrandon/Sparkov_Data_Generation), and converted to Parquet format (only 35MB) at build time using DuckDB.

```js
const merchants_csv = await FileAttachment("./data/merchants.csv").csv();
// display(merchants_csv)
const merchants = [null].concat(merchants_csv.map(item => item.merchant).sort());
// display(merchants)
```

```js
// const merchant = view(Inputs.select(merchants, {label: "Merchant"}));
const selected_merchant = view(
  Inputs.select(merchants, {
    label: "Merchant",
  })
);
```

```sql id=selected_merchants_data
SELECT * FROM txn1mm WHERE ${selected_merchant} IS NULL OR merchant=${selected_merchant}
```

<div class="grid grid-cols-4">
  <div class="card">
    <h2>Number of Transactions</h2>
    <span class="big">${selected_merchants_data.numRows.toLocaleString("en-US")}</span>
  </div>
</div>

```js
view(Inputs.table(selected_merchants_data))
```